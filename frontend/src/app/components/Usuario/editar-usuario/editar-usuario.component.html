<div *ngIf="!formulario">
  <mat-progress-bar mode="buffer" ></mat-progress-bar>
</div>

<div class="div-formulario" fxLayout="row" fxLayoutAlign="center end" *ngIf="formulario">

  <div class="div-form">
    <h1>Atualizaçção do usuário {{emailUsuario}}</h1>

    <mat-divider></mat-divider>

    <div class="formulario">
      <form [formGroup]="formulario" (ngSubmit)="AtualizarUsuario()" >
        <div fxLayout="row" fxLayoutGap="30px">
          <div fxFlex="40" fxLayoutAlign="center end">
            <div fxLayout="column">
              <div class="div-foto">
                <img id="foto" [src]="urlFoto" alt="" *ngIf="urlFoto" width="350" height="300" >
              </div>
              <div fxLayoutAlign="center end">
                <input hidden type="file" #fileInput name="foto" formControlName="foto" (change)="SelecionarFoto($event)">
                <br><br><br>
                <button type="button" mat-stroked-button color="primary" (click)="fileInput.click()" >
                  Escolha sua foto
                </button>
              </div>
            </div>
          </div>

          <div fxFlex="60">
            <div class="card-erros" *ngIf="erros.length > 0">
              <mat-card>
                <mat-card-header>
                  <mat-card-title>Algo deu errado!</mat-card-title>
                </mat-card-header>
                <mat-divider></mat-divider>
                <mat-card-content>
                  <div class="div-erros">
                    <h4 class="texto-erros" *ngFor="let erro of erros" >
                      {{erro}}
                    </h4>
                  </div>
                </mat-card-content>
              </mat-card>
            </div>

            <div>
              <mat-form-field>
                <mat-label>Nome de Usuário</mat-label>
                <input
                  matInput type="text"
                  formControlName="userName"
                  placeholder="Digite o nome de usuário"
                  required
                  minlength="6"
                  maxlength="50"
                  >
                  <mat-error *ngIf="propriedade.userName.touched && propriedade.userName.invalid">
                    <sup>*</sup> Digite o nome de usuário
                  </mat-error>
                  <mat-error *ngIf="propriedade.userName.errors?.minlength">
                    <sup>*</sup> Use mais caracteres
                  </mat-error>
                  <mat-error *ngIf="propriedade.userName.errors?.maxlength">
                    <sup>*</sup> Use menos caracteres
                  </mat-error>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field>
                <mat-label>CPF</mat-label>
                <input
                  matInput type="text"
                  formControlName="cpf"
                  placeholder="Digite o cpf"
                  required
                  mask="000.000.000-00"
                  minlength="1"
                  maxlength="20"
                  >
                  <mat-error *ngIf="propriedade.cpf.touched && propriedade.cpf.invalid">
                    <sup>*</sup> Digite o cpf
                  </mat-error>
                  <mat-error *ngIf="propriedade.cpf.errors?.minlength">
                    <sup>*</sup> Use mais caracteres
                  </mat-error>
                  <mat-error *ngIf="propriedade.cpf.errors?.maxlength">
                    <sup>*</sup> Use menos caracteres
                  </mat-error>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field>
                <mat-label>Profissão</mat-label>
                <input
                  matInput type="text"
                  formControlName="profissao"
                  placeholder="Digite a profissão"
                  required
                  minlength="1"
                  maxlength="30"
                  >
                  <mat-error *ngIf="propriedade.profissao.touched && propriedade.profissao.invalid">
                    <sup>*</sup> Digite a profissão
                  </mat-error>
                  <mat-error *ngIf="propriedade.profissao.errors?.minlength">
                    <sup>*</sup> Use mais caracteres
                  </mat-error>
                  <mat-error *ngIf="propriedade.profissao.errors?.maxlength">
                    <sup>*</sup> Use menos caracteres
                  </mat-error>
              </mat-form-field>
            </div>

            <div>
              <mat-form-field>
                <mat-label>E-mail</mat-label>
                <input
                  matInput type="email"
                  formControlName="email"
                  placeholder="Digite o e-mail"
                  required
                  minlength="10"
                  maxlength="50"
                  >
                  <mat-error *ngIf="propriedade.email.touched && propriedade.email.invalid">
                    <sup>*</sup> Digite o e-mail
                  </mat-error>
                  <mat-error *ngIf="propriedade.email.errors?.minlength">
                    <sup>*</sup> Use mais caracteres
                  </mat-error>
                  <mat-error *ngIf="propriedade.email.errors?.maxlength">
                    <sup>*</sup> Use menos caracteres
                  </mat-error>
              </mat-form-field>
            </div>

          </div>

        </div>
        <br><br>

        <mat-divider></mat-divider>

        <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end center" class="botoes" >
          <div>
            <button class="btn-edit" type="submit" mat-stroked-button color="primary" [disabled]="formulario.invalid" >Atualizar</button>
            <button mat-stroked-button type="button" (click)="Voltar()" >Voltar</button>
          </div>
        </div>

      </form>
    </div>


  </div>

</div>
